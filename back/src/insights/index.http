@apiUrl = http://localhost:3001
@siteKey = sk_5xjk338oj46hcvdqmsj2gfqh

### ============================================
### INSIGHTS & ANALYTICS ENDPOINTS (Materialized Views)
### ============================================

# Get Overview Analytics (last 30 days by default)
GET {{apiUrl}}/api/insights/overview
X-Site-Key: {{siteKey}}

### Get Overview Analytics - Today
GET {{apiUrl}}/api/insights/overview?dateFilter=day
X-Site-Key: {{siteKey}}

### Get Overview Analytics - This Week
GET {{apiUrl}}/api/insights/overview?dateFilter=week
X-Site-Key: {{siteKey}}

### Get Overview Analytics - This Month
GET {{apiUrl}}/api/insights/overview?dateFilter=month
X-Site-Key: {{siteKey}}

### Get Overview Analytics - This Year
GET {{apiUrl}}/api/insights/overview?dateFilter=year
X-Site-Key: {{siteKey}}

### Get Overview Analytics - Custom Date Range
GET {{apiUrl}}/api/insights/overview?dateFilter=custom&startDate=2024-01-01T00:00:00Z&endDate=2024-01-31T23:59:59Z
X-Site-Key: {{siteKey}}

###

# Get Top Events (last 30 days by default)
GET {{apiUrl}}/api/insights/top-events
X-Site-Key: {{siteKey}}

### Get Top Events - Today (limit 5)
GET {{apiUrl}}/api/insights/top-events?dateFilter=day&limit=5
X-Site-Key: {{siteKey}}

### Get Top Events - This Week (limit 20)
GET {{apiUrl}}/api/insights/top-events?dateFilter=week&limit=20
X-Site-Key: {{siteKey}}

### Get Top Events - Custom Date Range
GET {{apiUrl}}/api/insights/top-events?dateFilter=custom&startDate=2024-01-01T00:00:00Z&endDate=2024-01-31T23:59:59Z&limit=15
X-Site-Key: {{siteKey}}

###

# Get Top Cities (last 30 days by default)
GET {{apiUrl}}/api/insights/cities
X-Site-Key: {{siteKey}}

### Get Top Cities - Today (limit 5)
GET {{apiUrl}}/api/insights/cities?dateFilter=day&limit=5
X-Site-Key: {{siteKey}}

### Get Top Cities - This Month (limit 20)
GET {{apiUrl}}/api/insights/cities?dateFilter=month&limit=20
X-Site-Key: {{siteKey}}

### Get Top Cities - Custom Date Range
GET {{apiUrl}}/api/insights/cities?dateFilter=custom&startDate=2024-01-01T00:00:00Z&endDate=2024-01-31T23:59:59Z&limit=10
X-Site-Key: {{siteKey}}

###

# Get Device Analytics (last 30 days by default)
GET {{apiUrl}}/api/insights/devices
X-Site-Key: {{siteKey}}

### Get Device Analytics - Today (limit 5)
GET {{apiUrl}}/api/insights/devices?dateFilter=day&limit=5
X-Site-Key: {{siteKey}}

### Get Device Analytics - This Week (limit 15)
GET {{apiUrl}}/api/insights/devices?dateFilter=week&limit=15
X-Site-Key: {{siteKey}}

### Get Device Analytics - Custom Date Range
GET {{apiUrl}}/api/insights/devices?dateFilter=custom&startDate=2024-01-01T00:00:00Z&endDate=2024-01-31T23:59:59Z&limit=20
X-Site-Key: {{siteKey}}

###

# Admin: Refresh Materialized Views
POST {{apiUrl}}/api/insights/admin/refresh
Content-Type: application/json
X-Site-Key: {{siteKey}}

{
  "fromDate": "2024-01-01T00:00:00Z",
  "toDate": "2024-01-31T23:59:59Z"
}

###

# Admin: Refresh Materialized Views - Last 7 Days
POST {{apiUrl}}/api/insights/admin/refresh
Content-Type: application/json
X-Site-Key: {{siteKey}}

{
  "fromDate": "2024-01-24T00:00:00Z",
  "toDate": "2024-01-31T23:59:59Z"
}

###
