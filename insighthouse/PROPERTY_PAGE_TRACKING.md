# üè† Rastreamento da P√°gina do Im√≥vel - InsightHouse

## üéØ VIS√ÉO GERAL

Sistema completo de rastreamento da **p√°gina do im√≥vel**, incluindo:
- ‚úÖ Todos os bot√µes CTA (Fazer Proposta, Alugar, Mais Informa√ß√µes)
- ‚úÖ Formul√°rio de contato completo (campos individuais + convers√£o)
- ‚úÖ Detec√ß√£o de abandono do formul√°rio
- ‚úÖ Taxa de rejei√ß√£o e bounce rate
- ‚úÖ Associa√ß√£o completa ao usu√°rio (journey tracking)

---

## üìã ELEMENTOS RASTREADOS

### **1. BOT√ïES PRINCIPAIS (CTAs)**

#### **"FAZER PROPOSTA"**
```html
<a class="btn btn-primary cadastro-proposta-cta"
   href="/cadastro-de-proposta?codigo_imovel=2854">
  FAZER PROPOSTA
</a>
```

**Evento capturado:** `cta_fazer_proposta_click`
```javascript
{
  codigo: "2854",
  href: "/cadastro-de-proposta?codigo_imovel=2854",
  user_id: "user_123...",
  session_id: "session_456...",
  page_depth: 7,
  time_on_site: 420
}
```

**Funnel stage:** `clicked_fazer_proposta`

---

#### **"ALUGAR ESTE IM√ìVEL"**
```html
<a class="btn btn-primary cadastro-inquilino-cta"
   href="/cadastro?codigo_imovel=2854">
  ALUGAR ESTE IM√ìVEL
</a>
```

**Evento capturado:** `cta_alugar_imovel_click`
```javascript
{
  codigo: "2854",
  href: "/cadastro?codigo_imovel=2854",
  user_id: "user_123...",
  session_id: "session_456..."
}
```

**Funnel stage:** `clicked_alugar_imovel`

---

#### **"MAIS INFORMA√á√ïES"** ‚≠ê
```html
<a class="btn btn-primary"
   data-toggle="modal"
   href="#imovel-contato">
  MAIS INFORMA√á√ïES
</a>
```

**Evento capturado:** `cta_mais_informacoes_click`
```javascript
{
  codigo: "2854",
  user_id: "user_123...",
  session_id: "session_456..."
}
```

**Funnel stage:** `opened_contact_form`

---

### **2. FORMUL√ÅRIO DE CONTATO (Modal #imovel-contato)**

#### **Fluxo Completo:**

```
1. Usu√°rio clica "MAIS INFORMA√á√ïES"
   ‚Üí opened_contact_form

2. Usu√°rio digita primeiro caractere
   ‚Üí contact_form_started

3. Usu√°rio foca em "Nome"
   ‚Üí contact_form_field_focus (field: "nome")

4. Usu√°rio preenche e sai do campo
   ‚Üí contact_form_field_filled (field: "nome", has_value: true)

5. Repete para email, telefone, mensagem
   ‚Üí contact_form_field_focus
   ‚Üí contact_form_field_filled

6. Usu√°rio clica "Enviar"
   ‚Üí contact_form_submit (com completeness: 100%)
   ‚Üí conversion_contact_form ‚úÖ CONVERS√ÉO!
   ‚Üí funnel_stage_reached (stage: "submitted_contact_form")
```

---

### **Campos Rastreados:**

| Campo | Selector | Eventos |
|-------|----------|---------|
| **Nome** | `input[name="nome"]` | `focus`, `filled` |
| **E-mail** | `input[type="email"]` | `focus`, `filled` |
| **Celular** | `input[name="celular"]` | `focus`, `filled` |
| **Mensagem** | `textarea[name="mensagem"]` | `focus`, `filled` |

---

### **Evento: contact_form_field_focus**

Disparado quando usu√°rio clica em um campo:

```javascript
{
  codigo: "2854",
  field: "email",
  user_id: "user_123...",
  session_id: "session_456..."
}
```

**Permite saber:**
- Quais campos recebem mais aten√ß√£o
- Onde usu√°rios come√ßam a preencher
- Fluxo de preenchimento

---

### **Evento: contact_form_field_filled**

Disparado quando usu√°rio preenche e sai do campo:

```javascript
{
  codigo: "2854",
  field: "telefone",
  has_value: true,
  user_id: "user_123...",
  session_id: "session_456..."
}
```

**Permite saber:**
- Quais campos s√£o preenchidos
- Taxa de completude por campo
- Campos problem√°ticos (pouco preenchidos)

---

### **Evento: contact_form_submit** ‚≠ê

Disparado quando formul√°rio √© enviado:

```javascript
{
  codigo: "2854",
  has_nome: true,
  has_email: true,
  has_telefone: true,
  has_mensagem: false,
  form_completeness: 75, // 3 de 4 campos preenchidos
  user_id: "user_123...",
  session_id: "session_456...",
  page_depth: 8,
  time_on_site: 540
}
```

**Permite saber:**
- Quais campos foram preenchidos
- % de completude do formul√°rio
- Contexto completo do usu√°rio

---

### **Evento: conversion_contact_form** üéØ

**EVENTO PRINCIPAL DE CONVERS√ÉO!**

```javascript
{
  codigo: "2854",
  contact_type: "form",
  user_id: "user_123abc...",
  session_id: "session_456def...",
  page_depth: 8,           // Visitou 8 p√°ginas antes de converter
  time_on_site: 540,       // 9 minutos no site
  returning_visitor: false // Primeira visita
}
```

**Este evento permite:**
- ‚úÖ Identificar usu√°rio que converteu
- ‚úÖ Ver jornada completa at√© convers√£o
- ‚úÖ Calcular tempo m√©dio at√© convers√£o
- ‚úÖ Diferenciar novos vs retornantes
- ‚úÖ Calcular taxa de convers√£o por session

---

## üö´ RASTREAMENTO DE ABANDONO

### **Evento: contact_form_abandoned**

Disparado quando usu√°rio fecha modal sem enviar:

```javascript
{
  codigo: "2854",
  partial_data: true, // Tinha dados preenchidos
  user_id: "user_123...",
  session_id: "session_456..."
}
```

**Detecta quando:**
- Usu√°rio come√ßou a preencher (digitou algo)
- Fechou modal sem clicar "Enviar"
- Dados parciais perdidos

**Permite calcular:**
- Taxa de abandono do formul√°rio
- Onde usu√°rios desistem
- Otimiza√ß√£o do formul√°rio

---

## üìä TAXA DE REJEI√á√ÉO (BOUNCE RATE)

### **Evento: bounce_detected**

Disparado quando detecta comportamento de rejei√ß√£o:

```javascript
{
  type: "hard_bounce" | "quick_exit",
  time_on_page: 5,        // segundos
  max_scroll: 10,         // percentual
  page_depth: 1,          // apenas 1 p√°gina
  user_id: "...",
  session_id: "..."
}
```

### **Tipos de Bounce:**

#### **Hard Bounce**
```
Crit√©rios:
- Apenas 1 p√°gina visitada (page_depth = 1)
- Menos de 10 segundos no site
- Nenhuma intera√ß√£o significativa

Indica:
- Usu√°rio n√£o encontrou o que procurava
- Landing page ruim
- Oferta n√£o atrativa
```

#### **Quick Exit**
```
Crit√©rios:
- Menos de 30 segundos na p√°gina
- Scroll menor que 25%
- Saiu rapidamente

Indica:
- Conte√∫do n√£o relevante
- P√°gina confusa
- Expectativa n√£o atendida
```

---

## üé® INTERA√á√ïES ADICIONAIS NA P√ÅGINA

### **1. Galeria de Fotos**

#### **property_gallery_navigation**
Navega√ß√£o entre fotos (setas):
```javascript
{
  codigo: "2854",
  direction: "next" | "prev",
  user_id: "...",
  session_id: "..."
}
```

**Permite saber:**
- Quantas fotos usu√°rios veem em m√©dia
- Engajamento com galeria
- Im√≥veis com fotos mais visualizadas

#### **property_image_click**
Clique em foto para fullscreen:
```javascript
{
  codigo: "2854",
  user_id: "...",
  session_id: "..."
}
```

---

### **2. Compartilhar**

#### **property_share_click**
Bot√£o "Compartilhar":
```javascript
{
  codigo: "2854",
  user_id: "...",
  session_id: "..."
}
```

---

### **3. Favoritar**

#### **property_favorite_toggle**
Toggle de favorito:
```javascript
{
  codigo: "2854",
  action: "add" | "remove",
  user_id: "...",
  session_id: "..."
}
```

---

## üìà M√âTRICAS E INSIGHTS POSS√çVEIS

### **1. Taxa de Convers√£o por Etapa**

```sql
WITH funnel AS (
  SELECT
    COUNT(DISTINCT CASE WHEN event = 'property_page_view' THEN properties.session_id END) as stage_1,
    COUNT(DISTINCT CASE WHEN event = 'opened_contact_form' THEN properties.session_id END) as stage_2,
    COUNT(DISTINCT CASE WHEN event = 'contact_form_started' THEN properties.session_id END) as stage_3,
    COUNT(DISTINCT CASE WHEN event = 'contact_form_submit' THEN properties.session_id END) as stage_4,
    COUNT(DISTINCT CASE WHEN event = 'conversion_contact_form' THEN properties.session_id END) as stage_5
  FROM events
  WHERE timestamp >= now() - INTERVAL 30 DAY
)
SELECT
  stage_1 as "Visualizaram Im√≥vel",
  stage_2 as "Abriram Formul√°rio",
  ROUND((stage_2 * 100.0 / stage_1), 2) as "% Abriram Form",
  stage_3 as "Come√ßaram a Preencher",
  ROUND((stage_3 * 100.0 / stage_2), 2) as "% Come√ßaram",
  stage_4 as "Enviaram Formul√°rio",
  ROUND((stage_4 * 100.0 / stage_3), 2) as "% Completaram",
  stage_5 as "Convers√µes",
  ROUND((stage_5 * 100.0 / stage_1), 2) as "Convers√£o Total %"
FROM funnel
```

**Resultado exemplo:**
```
Visualizaram Im√≥vel: 1000
Abriram Formul√°rio: 450 (45%)
Come√ßaram a Preencher: 380 (84.4%)
Enviaram Formul√°rio: 250 (65.8%)
Convers√µes: 250
Convers√£o Total: 25%
```

---

### **2. Taxa de Abandono do Formul√°rio**

```sql
SELECT
  COUNT(CASE WHEN event = 'contact_form_started' THEN 1 END) as form_starts,
  COUNT(CASE WHEN event = 'contact_form_submit' THEN 1 END) as form_submits,
  COUNT(CASE WHEN event = 'contact_form_abandoned' THEN 1 END) as form_abandons,
  ROUND((COUNT(CASE WHEN event = 'contact_form_abandoned' THEN 1 END) * 100.0 /
         COUNT(CASE WHEN event = 'contact_form_started' THEN 1 END)), 2) as abandonment_rate
FROM events
WHERE timestamp >= now() - INTERVAL 30 DAY
```

**Exemplo:**
```
Form Starts: 380
Form Submits: 250
Form Abandons: 130
Abandonment Rate: 34.2%
```

**A√ß√£o:** Se taxa > 40%, otimizar formul√°rio (menos campos, melhor UX)

---

### **3. Taxa de Rejei√ß√£o (Bounce Rate)**

```sql
SELECT
  COUNT(DISTINCT properties.session_id) as total_sessions,
  COUNT(DISTINCT CASE WHEN event = 'bounce_detected' THEN properties.session_id END) as bounced_sessions,
  ROUND((COUNT(DISTINCT CASE WHEN event = 'bounce_detected' THEN properties.session_id END) * 100.0 /
         COUNT(DISTINCT properties.session_id)), 2) as bounce_rate,
  AVG(CASE WHEN event = 'bounce_detected' THEN properties.time_on_page END) as avg_bounce_time
FROM events
WHERE timestamp >= now() - INTERVAL 30 DAY
```

**Exemplo:**
```
Total Sessions: 5000
Bounced Sessions: 1200
Bounce Rate: 24%
Avg Bounce Time: 7 seconds
```

**Benchmarks:**
- < 25% - Excelente ‚úÖ
- 25-40% - Normal
- 40-55% - Precisa melhorar ‚ö†Ô∏è
- > 55% - Cr√≠tico ‚ùå

---

### **4. Campos Mais/Menos Preenchidos**

```sql
SELECT
  properties.field,
  COUNT(*) as focus_count,
  COUNT(CASE WHEN event = 'contact_form_field_filled' THEN 1 END) as filled_count,
  ROUND((COUNT(CASE WHEN event = 'contact_form_field_filled' THEN 1 END) * 100.0 /
         COUNT(*)), 2) as completion_rate
FROM events
WHERE
  event IN ('contact_form_field_focus', 'contact_form_field_filled')
  AND timestamp >= now() - INTERVAL 30 DAY
GROUP BY properties.field
ORDER BY completion_rate DESC
```

**Exemplo:**
```
Campo       | Focus | Filled | Completion %
------------|-------|--------|-------------
nome        | 380   | 370    | 97.4% ‚úÖ
email       | 380   | 360    | 94.7% ‚úÖ
telefone    | 380   | 340    | 89.5% ‚ö†Ô∏è
mensagem    | 250   | 180    | 72.0% ‚ö†Ô∏è
```

**Insights:**
- "Mensagem" tem baixa completude ‚Üí considerar tornar opcional
- "Telefone" perde ~10% ‚Üí simplificar valida√ß√£o

---

### **5. Jornada Completa at√© Convers√£o**

```sql
SELECT
  properties.user_id,
  COUNT(DISTINCT properties.session_id) as sessions_count,
  AVG(properties.page_depth) as avg_pages_per_session,
  AVG(properties.time_on_site) as avg_time_before_conversion,
  MIN(timestamp) as first_visit,
  MAX(timestamp) as conversion_date,
  DATEDIFF('day', MIN(timestamp), MAX(timestamp)) as days_to_convert
FROM events
WHERE
  properties.user_id IN (
    SELECT DISTINCT properties.user_id
    FROM events
    WHERE event = 'conversion_contact_form'
      AND timestamp >= now() - INTERVAL 30 DAY
  )
GROUP BY properties.user_id
ORDER BY days_to_convert DESC
LIMIT 100
```

**Exemplo:**
```
User ID         | Sessions | Avg Pages | Avg Time | Days to Convert
----------------|----------|-----------|----------|----------------
user_abc123     | 3        | 6.5       | 420s     | 5 dias
user_def456     | 1        | 12.0      | 680s     | 0 dias (same day)
user_ghi789     | 7        | 4.2       | 240s     | 14 dias
```

**Insights:**
- Usu√°rios convertem entre 0-14 dias
- M√©dia de 3 sess√µes at√© convers√£o
- 6-7 p√°ginas vistas por sess√£o

---

## üéØ EXEMPLO DE JORNADA REAL

### **Usu√°rio: user_abc123**

**Sess√£o 1 (Dia 1):**
```
1. session_start (landing: home)
2. search_submit (buscou: apartamento, 2 quartos, SP)
3. viewed_property (c√≥digo: 2854)
4. property_page_view (c√≥digo: 2854)
5. property_gallery_navigation (viu 3 fotos)
6. scroll_depth (50%)
7. page_exit (time: 120s)
```
**Resultado:** N√£o converteu, saiu ap√≥s 2min

---

**Sess√£o 2 (Dia 3):**
```
1. session_start (landing: /imovel/2854 - voltou direto!)
2. property_page_view (c√≥digo: 2854)
3. scroll_depth (75%)
4. property_favorite_toggle (favoritou)
5. cta_mais_informacoes_click (abriu form)
6. opened_contact_form
7. contact_form_started
8. contact_form_field_focus (nome)
9. contact_form_field_filled (nome)
10. contact_form_field_focus (email)
11. contact_form_field_filled (email)
12. contact_form_abandoned (fechou sem enviar!)
```
**Resultado:** Abandonou formul√°rio no meio

---

**Sess√£o 3 (Dia 5):**
```
1. session_start (landing: email marketing?)
2. property_page_view (c√≥digo: 2854)
3. cta_mais_informacoes_click
4. opened_contact_form
5. contact_form_started
6. contact_form_field_focus (nome)
7. contact_form_field_filled (nome)
8. contact_form_field_focus (email)
9. contact_form_field_filled (email)
10. contact_form_field_focus (telefone)
11. contact_form_field_filled (telefone)
12. contact_form_field_focus (mensagem)
13. contact_form_field_filled (mensagem)
14. contact_form_submit (completeness: 100%)
15. conversion_contact_form ‚úÖ
16. funnel_stage_reached (submitted_contact_form)
```
**Resultado:** CONVERS√ÉO! üéâ

---

**An√°lise da Jornada:**
- **3 sess√µes** ao longo de **5 dias**
- **Retornou 2 vezes** antes de converter
- **Favoritou** o im√≥vel na 2¬™ visita
- **Abandonou** formul√°rio uma vez
- **Converteu** na 3¬™ tentativa

**Insights:**
- Usu√°rios precisam de m√∫ltiplas visitas
- Favoritos indicam alta inten√ß√£o
- Follow-up ap√≥s abandono pode ajudar

---

## üìä DASHBOARD - EXEMPLOS DE GR√ÅFICOS

### **1. Funil Visual**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Visitantes: 5,000                   ‚îÇ 100%
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì 30%
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Buscas: 1,500                       ‚îÇ 30%
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì 40%
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Visualizaram Im√≥vel: 600            ‚îÇ 12%
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì 45%
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Abriram Formul√°rio: 270             ‚îÇ 5.4%
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì 70%
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Come√ßaram a Preencher: 189          ‚îÇ 3.8%
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì 75%
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Enviaram Formul√°rio: 142            ‚îÇ 2.8%
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì 100%
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üéØ CONVERS√ïES: 142                  ‚îÇ 2.8%
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Taxa de convers√£o geral: 2.8%** (142 de 5,000 visitantes)

---

### **2. Drop-off Points (Onde Perdem Usu√°rios)**

```
Etapa                    | Drop-off
-------------------------|----------
Visitantes ‚Üí Buscas      | 70% üî¥
Buscas ‚Üí Ver Im√≥vel      | 60% üî¥
Ver Im√≥vel ‚Üí Abrir Form  | 55% üî¥
Abrir Form ‚Üí Preencher   | 30% ‚ö†Ô∏è
Preencher ‚Üí Enviar       | 25% ‚úÖ
```

**A√ß√µes recomendadas:**
- **70% n√£o fazem busca**: Melhorar CTA na home
- **60% n√£o clicam em im√≥vel**: Melhorar fotos/t√≠tulos
- **55% n√£o abrem form**: Melhorar bot√£o "Mais Info"
- **30% abandonam form**: Simplificar formul√°rio

---

### **3. Campos do Formul√°rio - Completude**

```
Campo      | Foco | Preenchido | Taxa
-----------|------|------------|------
Nome       | 380  | 370        | 97% ‚úÖ
Email      | 380  | 360        | 95% ‚úÖ
Telefone   | 380  | 340        | 89% ‚ö†Ô∏è
Mensagem   | 250  | 180        | 72% üî¥
```

**Recomenda√ß√µes:**
- Telefone: Remover m√°scara complexa
- Mensagem: Tornar opcional ou sugerir texto padr√£o

---

## üîÑ COMPARA√á√ÉO: ANTES vs DEPOIS

| M√©trica | Script Original | Script Enhanced |
|---------|----------------|-----------------|
| **Rastreamento de filtros** | ‚ö†Ô∏è Parcial | ‚úÖ 100% completo |
| **Quartos/Su√≠tes/Vagas** | ‚ùå N√£o | ‚úÖ **SIM** |
| **User Journey** | ‚ùå N√£o | ‚úÖ **Persistente** |
| **Session Tracking** | ‚ùå N√£o | ‚úÖ **30min timeout** |
| **Formul√°rio de Contato** | ‚ùå N√£o | ‚úÖ **Completo** |
| **Campos individuais** | ‚ùå N√£o | ‚úÖ **Focus + Filled** |
| **Abandono de form** | ‚ùå N√£o | ‚úÖ **Detectado** |
| **Taxa de rejei√ß√£o** | ‚ùå N√£o | ‚úÖ **Calculada** |
| **CTAs (Proposta/Alugar)** | ‚ùå N√£o | ‚úÖ **Rastreados** |
| **Galeria de fotos** | ‚ùå N√£o | ‚úÖ **Navega√ß√£o** |
| **Associa√ß√£o ao usu√°rio** | ‚ùå N√£o | ‚úÖ **user_id + session_id** |

---

## ‚úÖ CHECKLIST DE CONVERS√ïES

### **Convers√µes Rastreadas:**

- [x] ‚úÖ Formul√°rio de contato (submit)
- [x] ‚úÖ WhatsApp (click)
- [x] ‚úÖ Telefone (click)
- [x] ‚úÖ Email (click)
- [x] ‚úÖ Fazer Proposta (redirect)
- [x] ‚úÖ Alugar Im√≥vel (redirect)

### **Contexto de Cada Convers√£o:**

```javascript
{
  codigo: "2854",           // ‚úÖ C√≥digo do im√≥vel
  user_id: "user_123...",   // ‚úÖ Usu√°rio √∫nico
  session_id: "session_456...", // ‚úÖ Sess√£o atual
  page_depth: 8,            // ‚úÖ P√°ginas visitadas
  time_on_site: 540,        // ‚úÖ Tempo at√© convers√£o
  returning_visitor: false  // ‚úÖ Novo ou retornante
}
```

---

## üöÄ IMPLEMENTA√á√ÉO

### **1. Incluir o Script no Site**

```html
<!-- Na p√°gina do im√≥vel -->
<script src="https://seu-cdn.com/static/capture-filtros-enhanced.js"></script>
```

### **2. Verificar Funcionamento**

```javascript
// Console do navegador
MyAnalytics.debug = true

// Interagir com p√°gina:
// 1. Clicar "MAIS INFORMA√á√ïES"
// 2. Preencher campos
// 3. Enviar formul√°rio

// Ver eventos no console ‚úÖ
```

### **3. Verificar no PostHog**

1. Acessar PostHog
2. Ir em "Events"
3. Filtrar por:
   - `property_page_view`
   - `contact_form_submit`
   - `conversion_contact_form`

4. Ver propriedades:
   - `user_id` ‚úÖ
   - `session_id` ‚úÖ
   - `codigo` ‚úÖ
   - `form_completeness` ‚úÖ

---

## üìã RESUMO EXECUTIVO

### **‚úÖ TUDO IMPLEMENTADO:**

#### **P√°gina do Im√≥vel:**
- [x] View da p√°gina
- [x] Bot√£o "Fazer Proposta"
- [x] Bot√£o "Alugar Este Im√≥vel"
- [x] Bot√£o "Mais Informa√ß√µes"
- [x] Galeria de fotos (navega√ß√£o)
- [x] Compartilhar
- [x] Favoritar

#### **Formul√°rio de Contato:**
- [x] Abertura do modal
- [x] In√≠cio do preenchimento
- [x] Foco em cada campo (nome, email, telefone, mensagem)
- [x] Preenchimento de cada campo
- [x] Envio do formul√°rio
- [x] Convers√£o principal
- [x] Abandono detectado

#### **Taxa de Rejei√ß√£o:**
- [x] Hard bounce (1 p√°gina + <10s)
- [x] Quick exit (<30s + scroll <25%)
- [x] Associado ao user_id

#### **Associa√ß√£o ao Usu√°rio:**
- [x] user_id persistente
- [x] session_id com timeout
- [x] Journey completo (p√°ginas visitadas)
- [x] Contexto em todos eventos

---

## üéâ CONCLUS√ÉO

### **‚úÖ PERGUNTAS RESPONDIDAS:**

**1. "Formul√°rio de contato est√° sendo capturado?"**
‚Üí ‚úÖ **SIM! Completamente:**
- Abertura do modal ‚úÖ
- Campos individuais (foco + preenchimento) ‚úÖ
- Envio do formul√°rio ‚úÖ
- Convers√£o principal ‚úÖ
- Abandono ‚úÖ

**2. "Evento de convers√£o associado ao usu√°rio?"**
‚Üí ‚úÖ **SIM! Com contexto completo:**
- `user_id` persistente ‚úÖ
- `session_id` ‚úÖ
- Journey pages ‚úÖ
- Page depth e time on site ‚úÖ

**3. "Taxa de rejei√ß√£o e outras informa√ß√µes relevantes?"**
‚Üí ‚úÖ **SIM! M√©tricas completas:**
- Bounce rate (hard + quick) ‚úÖ
- Taxa de abandono do form ‚úÖ
- Taxa de convers√£o por etapa ‚úÖ
- Campos problem√°ticos ‚úÖ
- Jornada completa at√© convers√£o ‚úÖ

---

**Status:** üü¢ **IMPLEMENTA√á√ÉO COMPLETA**

**Cobertura:** 100% (Formul√°rio + CTAs + Rejei√ß√£o + Journey)

**Pr√≥ximo passo:** Substituir script no site e come√ßar a coletar dados! üöÄ

